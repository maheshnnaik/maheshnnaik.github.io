{"version":3,"sources":["assets/Script/HelloWorld.js","assets/Script/Video.ts"],"names":["cc","Class","extends","Component","properties","label","default","type","Label","text","onLoad","this","string","update","dt","_a","_decorator","ccclass","property","macro","ENABLE_TRANSPARENT_CANVAS","Video","_super","__extends","_this","apply","arguments","enterScreen","tapToContinue","Games","videoPlayer","video","overlayButton","videoPlayerPrefab","backBtn","prototype","ShowTapToContinue","start","tween","delay","call","self","active","to","opacity","interactable","instantiateVideo","onStartButtonClick","node","on","stop","parent","destroy","play","isValid","instantiate","getComponent","VideoPlayer","find","onBackButtonClick","__decorate","Node","Button","Prefab","exports"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAAA,GAAAC,MAAA;MACIC,SAAAF,GAAAG;MAEAC,YAAA;QACIC,OAAA;UACIC,SAAA;UACAC,MAAAP,GAAAQ;;QAGJC,MAAA;;MAIJC,QAAA,SAAAA;QACIC,KAAAN,MAAAO,SAAAD,KAAAF;;MAIJI,QAAA,SAAAA,OAAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IClBE,IAAAC,KAAAf,GAAAgB,YAAAC,UAAAF,GAAAE,SAAAC,WAAAH,GAAAG;IACNlB,GAAAmB,MAAAC,4BAAA;IAEA,IAAAC,QAAA,SAAAC;MAAmCC,UAAAF,OAAAC;MAAnC,SAAAD;QAAA,IAAAG,QAAA,SAAAF,UAAAA,OAAAG,MAAAd,MAAAe,cAAAf;QAGIa,MAAAG,cAAA;QAGAH,MAAAI,gBAAA;QAGAJ,MAAAK,QAAA;QAGAL,MAAAM,cAAA;QAGAN,MAAAO,QAAA;QAGAP,MAAAQ,gBAAA;QAGAR,MAAAS,oBAAA;QAGAT,MAAAU,UAAA;;;MAEAb,MAAAc,UAAAzB,SAAA;QACIC,KAAAyB;;MAGJf,MAAAc,UAAAE,QAAA;MAIAhB,MAAAc,UAAAC,oBAAA;QAAA,IAAAZ,QAAAb;QAEIX,GAAAsC,MAAA3B,KAAAiB,eACGW,MAAA,GACAC,KAAA;UACC,IAAAC,OAAAjB;UACAA,MAAAI,cAAAc,SAAA;UACA1C,GAAAsC,MAAAd,MAAAI,eAAAe,GAAA,IAAA;YAAAC,SAAA;aAAAP;UACAb,MAAAQ,cAAAa,eAAA;UAEArB,MAAAsB;UACAtB,MAAAM,YAAAY,SAAA;UACAlB,MAAAK,MAAAa,SAAA;WAEDL;;MAEPhB,MAAAc,UAAAY,qBAAA;QAAA,IAAAvB,QAAAb;QACIA,KAAAgB,YAAAe,SAAA;QACA/B,KAAAiB,cAAAgB,UAAA;QACAjC,KAAAqB,cAAAa,eAAA;QACAlC,KAAAmC;QACAnC,KAAAmB,YAAAY,SAAA;QACA/B,KAAAoB,MAAAiB,KAAAC,GAAA,aAAA;UAIIzB,MAAAO,MAAAmB;UACA1B,MAAAO,MAAAiB,KAAAG,SAAA;UACA3B,MAAAO,MAAAiB,KAAAI;UACA5B,MAAAK,MAAAa,SAAA;UACAlB,MAAAU,QAAAQ,SAAA;WACF/B;QAGFA,KAAAoB,MAAAsB;;MAEJhC,MAAAc,UAAAW,mBAAA;QACI,KAAA9C,GAAAsD,QAAA3C,KAAAmB,cAAA;UACInB,KAAAmB,cAAA9B,GAAAuD,YAAA5C,KAAAsB;UACAtB,KAAAoB,QAAApB,KAAAmB,YAAA0B,aAAAxD,GAAAyD;UACA9C,KAAAmB,YAAAqB,SAAAnD,GAAA0D,KAAA;;;MAGRrC,MAAAc,UAAAwB,oBAAA;QACIhD,KAAAuB,QAAAQ,SAAA;QACA/B,KAAAkB,MAAAa,SAAA;QACA/B,KAAAgB,YAAAe,SAAA;QACA/B,KAAAyB;;MA9EJwB,WAAA,EADC1C,SAAAlB,GAAA6D,SAC2BxC,MAAAc,WAAA,oBAAA;MAG5ByB,WAAA,EADC1C,SAAAlB,GAAA6D,SAC6BxC,MAAAc,WAAA,sBAAA;MAG9ByB,WAAA,EADC1C,SAAAlB,GAAA6D,SACqBxC,MAAAc,WAAA,cAAA;MAGtByB,WAAA,EADC1C,SAAAlB,GAAA6D,SAC2BxC,MAAAc,WAAA,oBAAA;MAG5ByB,WAAA,EADC1C,SAAAlB,GAAAyD,gBAC4BpC,MAAAc,WAAA,cAAA;MAG7ByB,WAAA,EADC1C,SAAAlB,GAAA8D,WAC+BzC,MAAAc,WAAA,sBAAA;MAGhCyB,WAAA,EADC1C,SAAAlB,GAAA+D,WACmC1C,MAAAc,WAAA,0BAAA;MAGpCyB,WAAA,EADC1C,SAAAlB,GAAA6D,SACuBxC,MAAAc,WAAA,gBAAA;MAxBPd,QAAAuC,WAAA,EADpB3C,WACoBI;MAoFrB,OAAAA;KApFA,CAAArB,GAAAG;IAAqB6D,QAAA1D,UAAAe","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        label: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        // defaults, set visually when attaching this script to the Canvas\r\n        text: 'Hello, World!'\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.label.string = this.text;\r\n    },\r\n\r\n    // called every frame\r\n    update: function (dt) {\r\n\r\n    },\r\n});\r\n","const {ccclass, property} = cc._decorator;\r\ncc.macro.ENABLE_TRANSPARENT_CANVAS = true;\r\n@ccclass\r\nexport default class Video extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    enterScreen: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    tapToContinue: cc.Node = null;\r\n    \r\n    @property(cc.Node)\r\n    Games: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    videoPlayer: cc.Node = null;\r\n\r\n    @property(cc.VideoPlayer)\r\n    video: cc.VideoPlayer = null;\r\n\r\n    @property(cc.Button)\r\n    overlayButton: cc.Button = null;\r\n\r\n    @property(cc.Prefab)\r\n    videoPlayerPrefab: cc.Prefab = null;\r\n\r\n    @property(cc.Node)\r\n    backBtn: cc.Node = null;\r\n\r\n    onLoad () {\r\n        this.ShowTapToContinue();\r\n    }\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    ShowTapToContinue() {\r\n        // this.video.node.on('meta-loaded', ()=>{console.log(\"loaded\")}, this);\r\n        cc.tween(this.tapToContinue)\r\n          .delay(2)\r\n          .call(() => {\r\n            var self = this;\r\n            this.tapToContinue.active = true;\r\n            cc.tween(this.tapToContinue).to(0.5, { opacity: 255 }).start();\r\n            this.overlayButton.interactable = true;\r\n            // this.video.isFullscreen = false;\r\n            this.instantiateVideo();\r\n            this.videoPlayer.active = true;\r\n            this.Games.active = false;\r\n          })\r\n          .start();\r\n    }\r\n    onStartButtonClick() {\r\n        this.enterScreen.active = false;\r\n        this.tapToContinue.opacity = 0;\r\n        this.overlayButton.interactable = false;\r\n        this.instantiateVideo();\r\n        this.videoPlayer.active = true;\r\n        this.video.node.on(\r\n          \"completed\",\r\n          () => {\r\n            // this.videoPlayer.setScale(1);\r\n            this.video.stop();\r\n            this.video.node.parent = null;\r\n            this.video.node.destroy();\r\n            this.Games.active = true;\r\n            this.backBtn.active = true;\r\n          },\r\n          this\r\n        );\r\n        this.video.play();\r\n    }\r\n    instantiateVideo(){\r\n        if(!cc.isValid(this.videoPlayer)){\r\n            this.videoPlayer = cc.instantiate(this.videoPlayerPrefab);\r\n            this.video = this.videoPlayer.getComponent(cc.VideoPlayer);\r\n            this.videoPlayer.parent = cc.find(\"Canvas\");\r\n        }\r\n    }\r\n    onBackButtonClick() {\r\n        this.backBtn.active = false;\r\n        this.Games.active = false;\r\n        this.enterScreen.active = true;\r\n        this.ShowTapToContinue();\r\n      }\r\n    // update (dt) {}\r\n}"],"file":"index.js"}